---
openapi: 3.0.3
info:
  title: onecx-ai internal service
  version: 1.0.0
servers:
  - url: "http://onecx-ai-svc:8080"
tags:
  - name: aiKnowledgeBaseInternal
  - name: aiContextInternal
  - name: aiProviderInternal
  - name: aiKnowledgeDocumentInternal
  - name: aiKnowledgeVectorDbInternal
  - name: aiKnowledgeUrlInternal
  - name: aiKnowledgeDatabaseInternal
  - name: aiInternal  
paths:

  /internal/ai/ai-knowledgebases:                  
    post:
      tags:
        - aiKnowledgeBaseInternal
      summary: Create an AI AIKnowledgeBase
      operationId: createAIKnowledgeBase
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIKnowledgeBaseRequest'
      responses:
        "201":
          description: New KnowledgeBase created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeBase'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'

  /internal/ai/ai-knowledgebases/{id}:
    get:
      tags:
        - aiKnowledgeBaseInternal
      description: Return AI Knowledgebase by ID
      operationId: getAIKnowledgeBase
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeBase'
        "404":
          description: Not found  
    put:
      tags:
        - aiKnowledgeBaseInternal
      summary: Update an AI Knowledgebase
      operationId: updateAIKnowledgeBase      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIKnowledgeBaseRequest'
      responses:
        '204':
          description: AI AIKnowledgeBase updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI Knowledgebase not found 
    delete:
      tags:
        - aiKnowledgeBaseInternal    
      summary: Delete an AI AIKnowledgeBase
      operationId: deleteAIKnowledgeBase      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content

  /internal/ai/ai-knowledgebases/{id}/ai-contexts:
    post:
      tags:
        - aiContextInternal
      summary: Create an AI Context
      operationId: createAIContext
      parameters:
        - name: id
          in: path
          description: The ID of the knowledge base.
          required: true
          schema:
            type: string      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIContextRequest'
      responses:
        "201":
          description: New AIContext created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIContext'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
    get:
      tags:
        - aiContextInternal
      description: Return AIContexts by knowledgebaseID
      operationId: getAIContextsByKnowledgeBaseId
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIContext'
        "404":
          description: Not found


  /internal/ai/ai-knowledgebases/search:
    post:
      tags:
        - aiKnowledgeBaseInternal    
      summary: Find AI AIKnowledgeBase by Search Criteria
      operationId: findAIKnowlegeBaseBySearchCriteria
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIKnowledgeBaseSearchCriteria'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIKnowledgeBasePageResult'


  /internal/ai/ai-contexts/{id}:
    get:
      tags:
        - aiContextInternal
      summary: Get AIContext
      operationId: getAIContext
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIContext'
        "404":
          description: Not found

    delete:
      tags:
        - aiContextInternal
      summary: Delete AIContext
      operationId: deleteAIContext
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: AI Context deleted

    put:
      tags:
        - aiContextInternal
      summary: Update an AI Context
      operationId: updateAIContext      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIContextRequest'
      responses:
        '204':
          description: AI Context updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI Context not found
  
  /internal/ai/ai-contexts/{id}/documents:
    post:
      tags:
        - aiKnowledgeDocumentInternal
      summary: Upload Documents into Document Management and create AI Knowledge Documents
      operationId: uploadKnowledgeDocuments      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                documents:
                  type: array
                  items:
                    $ref: '#/components/schemas/Document'
      responses:
        '201':
          description: Created

  /internal/ai/ai-contexts/{id}/ai-providers/{ai-provider-id}:
    get:
      tags:
        - aiKnowledgeBaseInternal
      description: Return AIProvider by contextId and provider ID
      operationId: getAIProviderOfAIContext
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: ai-provider-id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProvider'
        "404":
          description: Not found    
    put:
      tags:
        - aiKnowledgeBaseInternal
      summary: Add AI Provider to AI Context
      operationId: addAIProvider
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: ai-provider-id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIProvider'
      responses:
        '204':
          description: AI Provider added to AI Context
    delete:
      tags:
        - aiKnowledgeBaseInternal
      summary: Remove AI Provider from AI Context
      operationId: removeAIProvider      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: ai-provider-id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: AI Provider removed from AI Context


  /internal/ai/ai-contexts/{id}/ai-knowledge-vdb:
    post:
      tags:
        - aiKnowledgeVectorDbInternal
      summary: Create Knowledge Vector database
      operationId: createKnowledgeVectorDb
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIKnowledgeVectorDbRequest'
      responses:
        "201":
          description: New AIKnowledgeVectorDb created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeVectorDb'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
    get:
      tags:
        - aiKnowledgeVectorDbInternal
      description: Return AIKnowledgeVectorDb by contextID
      operationId: getAIKnowledgeVectorDbByContextId
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeVectorDb'
        "404":
          description: Not found

  /internal/ai/ai-contexts/{id}/ai-knowledge-urls:
    post:
      tags:
        - aiKnowledgeUrlInternal
      summary: Create Knowledge URL
      operationId: createKnowledgeUrl
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIKnowledgeUrlRequest'
      responses:
        "201":
          description: New AIKnowledgeUrl created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeUrl'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'

    get:
      tags:
        - aiKnowledgeUrlInternal
      description: Return AIKnowledgeUrls by contextID
      operationId: getAIKnowledgeUrlsByContextId
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIKnowledgeUrl'
        "404":
          description: Not found

  /internal/ai/ai-contexts/{id}/ai-knowledge-documents:
    put:
      tags:
        - aiKnowledgeDocumentInternal
      summary: Embedd AI Knowledge Documents into Vector Database
      operationId: embedd KnowledgeDocuments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/AIKnowledgeDocument'
      responses:
        '204':
          description: AI Knowledge Documents embedded
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'

    post:
      tags:
        - aiKnowledgeDocumentInternal
      summary: Create an AI Knowledge Document
      operationId: createKnowledgeDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIKnowledgeDocumentRequest'
      responses:
        "201":
          description: New AIKnowledgeDocument created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeDocument'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
    get:
      tags:
        - aiKnowledgeDocumentInternal
      description: Return AIKnowledgeDocuments by contextID
      operationId: getAIKnowledgeDocumentsByContextId
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIKnowledgeDatabase'
        "404":
          description: Not found

  /internal/ai/ai-contexts/{id}/ai-knowledge-databases:
    post:
      tags:
        - aiKnowledgeDatabaseInternal
      summary: Creates a new AI knowledge database by context id.
      operationId: createKnowledgeDb
      parameters:
        - name: id
          in: path
          description: The ID of the AI context.
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIKnowledgeDatabaseRequest'
      responses:
        "201":
          description: New AIKnowledgeDatabase created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeDatabase'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'

    get:
      tags:
        - aiKnowledgeDatabaseInternal
      description: Return AIKnowledgeDatabases by contextID
      operationId: getAIKnowledgeDatabasesByContextId
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIKnowledgeDatabase'
        "404":
          description: Not found

  /internal/ai/ai-knowledge-databases/{id}:
    get:
      tags:
        - aiKnowledgeDatabaseInternal
      description: Return AIKnowledgeDatabase by ID
      operationId: getAIKnowledgeDatabase
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeDatabase'
        "404":
          description: Not found    
    put:
      tags:
        - aiKnowledgeDatabaseInternal
      summary: Update Knowledge Database
      operationId: updateKnowledgeDb
      parameters:
        - name: id
          in: path
          description: The ID of the AI knowledge database.
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIKnowledgeDatabaseRequest'
      responses:
        '204':
          description: AI KnowledgeDb updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI KnowledgeDb not found  
    delete:
      tags:
        - aiKnowledgeDatabaseInternal
      summary: Delete Knowledge Database from AI Context
      operationId: deleteKnowledgeDb
      parameters:
        - name: id
          in: path
          description: The ID of the AI knowledge database.
          required: true
          schema:
            type: string      
      responses:
        '204':
          description: Knowledge Database deleted


  /internal/ai/ai-contexts/search:
    post:
      tags:
        - aiContextInternal
      summary: Find AI Context by Search Criteria
      operationId: findAIContextBySearchCriteria
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIContextSearchCriteria'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIContextPageResult'

  /internal/ai/ai-providers:                  
    post:
      tags:
        - aiProviderInternal
      summary: Create an AI Provider
      operationId: createAIProvider
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAIProviderRequest'
      responses:
        "201":
          description: New AIProvider created
          headers:
            Location:
              required: true
              schema:
                type: string
                format: url
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProvider'
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'

  /internal/ai/ai-providers/{id}:
    get:
      tags:
        - aiProviderInternal
      description: Return AI Provider by ID
      operationId: getAIProvider
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIProvider'
        "404":
          description: Not found  
    put:
      tags:
        - aiProviderInternal
      summary: Update an AI Provider
      operationId: updateAIProvider
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIProviderRequest'
      responses:
        '204':
          description: AI Provider updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI Provider not found 
    delete:
      tags:
        - aiProviderInternal    
      summary: Delete an AI Provider
      operationId: deleteAIProvider
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content
  /internal/ai/ai-providers/search:
    post:
      tags:
        - aiProviderInternal     
      summary: Find AI Providers by Search Criteria
      operationId: findAIProviderBySearchCriteria
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AIProviderSearchCriteria'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AIProviderPageResult'
            
  /internal/ai/ai-knowledge-documents/{id}:
    get:
      tags:
        - aiKnowledgeDocumentInternal
      description: Return AIKnowledgeDocument by ID
      operationId: getAIKnowledgeDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeDocument'
        "404":
          description: Not found   
    put:
      tags:
        - aiKnowledgeDocumentInternal
      summary: Update an AIKnowledgeDocument
      operationId: updateKnowledgeDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIKnowledgeDocumentRequest'
      responses:
        '204':
          description: AIKnowledgeDocument updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI Knowledge Document not found

    delete:
      tags:
        - aiKnowledgeDocumentInternal
      summary: Delete AI Knowledge Document
      operationId: deleteKnowledgeDocument
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: AI Knowledge Document deleted


  /internal/ai/ai-knowledge-urls/{id}:
    get:
      tags:
        - aiKnowledgeUrlInternal
      description: Return AIKnowledgeUrl by ID
      operationId: getAIKnowledgeUrl
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeUrl'
        "404":
          description: Not found      
    put:
      tags:
        - aiKnowledgeUrlInternal
      summary: Update AIKnowledgeUrl
      operationId: updateKnowledgeUrl
      parameters:
        - name: id
          in: path
          description: The ID of the AI knowledge URL.
          required: true
          schema:
            type: string     
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIKnowledgeUrlRequest'
      responses:
        '204':
          description: AI KnowledgeUrl updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AI KnowledgeUrl not found                         
    delete:
      tags:
        - aiKnowledgeUrlInternal
      summary: Delete AIKnowledgeUrl
      operationId: deleteKnowledgeUrl
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: AIKnowledgeUrl deleted
  

  /internal/ai/ai-knowledge-vdbs/{id}:
    get:
      tags:
        - aiKnowledgeVectorDbInternal
      description: Return AIKnowlegeVectorDb by ID
      operationId: getAIKnowledgeVectorDb
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIKnowledgeVectorDb'
        "404":
          description: Not found    
    put:
      tags:
        - aiKnowledgeVectorDbInternal
      summary: Update AIKnowlegeVectorDb
      operationId: updateKnowledgeVectorDb
      parameters:
        - name: id
          in: path
          description: The ID of the AI knowledge vector database.
          required: true
          schema:
            type: string      
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateAIKnowledgeVectorDbRequest'
      responses:
        '204':
          description: AIKnowlegeVectorDb updated
        "400":
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProblemDetailResponse'
        "404":
          description: AIKnowlegeVectorDb not found                         
    delete:
      tags:
        - aiKnowledgeVectorDbInternal
      summary: Delete AIKnowlegeVectorDb
      operationId: deleteKnowledgeVectorDb      
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: No Content


  /internal/ai/generate:
    post:
      tags:
        - aiInternal    
      summary: Generate AI Response
      operationId: generate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                aiContext:
                  $ref: '#/components/schemas/AIContext'               
                aiRequest:
                  $ref: '#/components/schemas/AIRequest'
              required:
                - aiContext
                - aiRequest
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AIResponse'
  /internal/ai/chat:
    post:
      tags:
        - aiInternal    
      summary: Chat with AI
      operationId: chat
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                aiContext:
                  $ref: '#/components/schemas/AIContext'              
                chatMessage:
                  $ref: '#/components/schemas/ChatMessage'
                conversation:
                  $ref: '#/components/schemas/Conversation'
              required:
                - chatMessage
              additionalProperties: false
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatMessage'

components:
  schemas:
    DocumentStatusType:
      type: string
      enum:
        - NEW
        - PROCESSING
        - EMBEDDED
    AIRequest:
      type: object
      properties:
        message:
          type: string
          maxLength: 10000
    AIResponse:
      type: object
      properties:
        message:
          type: string
          maxLength: 10000          
    ChatMessage:
      type: object
      properties:
        conversationId:
          type: string
        message:
          type: string
          maxLength: 10000
        type:
          type: string
          enum: [ASSISTANT, SYSTEM, USER, ACTION]
        creationDate:
          type: integer
          format: int64
        reliability:
          type: float
    Conversation:
      type: object
      properties:
        conversationId:
          type: string
        history:
          type: array
          items:
            $ref: '#/components/schemas/ChatMessage'
        conversationType:
          type: string
          enum: [Q_AND_A]
    Document:
      type: object
      properties:
        content:
          type: string
          format: byte
          description: Base64 encoded document content        
    AIProviderSearchCriteria:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        llmUrl:
          type: string       
        modelName:
          type: string       
        modelVersion:
          type: string
        apiKey:
          type: string          
        appId:
          type: string                                      
        tenandId:
          type: string          
        pageNumber:
          format: int32
          description: The number of page.
          default: 0
          type: integer
        pageSize:
          format: int32
          description: The size of page
          default: 10
          type: integer    
    AIContextSearchCriteria:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        appId:
          type: string                                      
        tenandId:
          type: string          
        pageNumber:
          format: int32
          description: The number of page.
          default: 0
          type: integer
        pageSize:
          format: int32
          description: The size of page
          default: 10
          type: integer
    AIKnowledgeBaseSearchCriteria:
      type: object
      properties:    
        id:
          type: string
        name:
          type: string
        appId:
          type: string                                      
        tenandId:
          type: string          
        pageNumber:
          format: int32
          description: The number of page.
          default: 0
          type: integer
        pageSize:
          format: int32
          description: The size of page
          default: 10
          type: integer
    AIKnowledgeBasePageResult:
      type: object
      properties:
        totalElements:
          format: int64
          description: The total elements in the resource.
          type: integer
        number:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        totalPages:
          format: int64
          type: integer
        stream:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeBase'
    CreateAIKnowledgeBaseRequest:
      properties:
        description:
          type: string
        name:
          type: string
        appId:
          type: string
        contexts:
          type: array
          items:
            $ref: '#/components/schemas/AIContext'
    UpdateAIKnowledgeBaseRequest:
      properties:
        description:
          type: string
        name:
          type: string
        appId:
          type: string
        contexts:
          type: array
          items:
            $ref: '#/components/schemas/AIContext'            
    AIKnowledgeBase:
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        description:
          type: string
        name:
          type: string
        appId:
          type: string
        contexts:
          type: array
          items:
            $ref: '#/components/schemas/AIContext'
    CreateAIProviderRequest:
      required:
        - name
        - modelName
        - modelVersion
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        llmUrl:
          type: string
        modelName:
          type: string
        modelVersion:
          type: string
        appId:
          type: string           
        apiKey:
          type: string
    UpdateAIProviderRequest:
      required:
        - name
        - modelName
        - modelVersion
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        llmUrl:
          type: string
        modelName:
          type: string
        modelVersion:
          type: string
        appId:
          type: string           
        apiKey:
          type: string          
    AIProvider:
      required:
        - name
        - modelName
        - modelVersion
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        name:
          type: string
        description:
          type: string
        llmUrl:
          type: string
        modelName:
          type: string
        modelVersion:
          type: string
        appId:
          type: string           
        apiKey:
          type: string
    AIProviderPageResult:
      type: object
      properties:
        totalElements:
          format: int64
          description: The total elements in the resource.
          type: integer
        number:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        totalPages:
          format: int64
          type: integer
        stream:
          type: array
          items:
            $ref: '#/components/schemas/AIProvider'                                                      
    CreateAIKnowledgeDocumentRequest:
      required:
        - documentRefId
      type: object
      properties:
        status:
          $ref: '#/components/schemas/DocumentStatusType'
        name:
          type: string
        documentRefId:
          type: string
    UpdateAIKnowledgeDocumentRequest:
      required:
        - documentRefId
      type: object
      properties:
        status:
          $ref: '#/components/schemas/DocumentStatusType'
        name:
          type: string
        documentRefId:
          type: string
    AIKnowledgeDocument:
      required:
        - documentRefId
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        status:
          $ref: '#/components/schemas/DocumentStatusType'
        name:
          type: string
        documentRefId:
          type: string                    
    CreateAIKnowledgeUrlRequest:
      required:
        - url
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        url:
          type: string
    UpdateAIKnowledgeUrlRequest:
      required:
        - url
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        url:
          type: string
    AIKnowledgeUrl:
      required:
        - url
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        name:
          type: string
        description:
          type: string
        url:
          type: string
    CreateAIKnowledgeVectorDbRequest:
      required:
        - vdbUrl
        - user
        - pwd
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        vdbUrl:
          type: string
        vdbCollection:
          type: string 
        user:
          type: string
        pwd:
          type: string
    UpdateAIKnowledgeVectorDbRequest:
      required:
        - vdbUrl
        - user
        - pwd
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        vdbUrl:
          type: string
        vdbCollection:
          type: string 
        user:
          type: string
        pwd:
          type: string
    AIKnowledgeVectorDb:
      required:
        - vdbUrl
        - user
        - pwd
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        name:
          type: string
        description:
          type: string
        vdbUrl:
          type: string
        vdbCollection:
          type: string 
        user:
          type: string
        pwd:
          type: string                    
    CreateAIKnowledgeDatabaseRequest:
      required:
        - db
        - user
        - pwd
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        db:
          type: string
        user:
          type: string 
        pwd:
          type: string
        tables:
          type: array
          items:
            type: string
    UpdateAIKnowledgeDatabaseRequest:
      required:
        - db
        - user
        - pwd
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        db:
          type: string
        user:
          type: string 
        pwd:
          type: string
        tables:
          type: array
          items:
            type: string            
    AIKnowledgeDatabase:
      required:
        - db
        - user
        - pwd
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        name:
          type: string
        description:
          type: string
        db:
          type: string
        user:
          type: string 
        pwd:
          type: string
        tables:
          type: array
          items:
            type: string
    AIMessage:
      type: object
      properties:
        content:
          type: string
        sender:
          type: string
        timestamp:
          type: string
          format: date-time
        # Add any other relevant properties here, such as ID or metadata            
    CreateAIContextRequest:
      required:
        - name
      type: object
      properties:
        name:
          type: string
        llmSystemMessage:
          type: string
        llmProvider:
          $ref: '#/components/schemas/AIProvider'
        vectorDb:
          $ref: '#/components/schemas/AIKnowledgeVectorDb'          
        documents:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDocument'
        urls:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeUrl'
        dbs:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDatabase'
    UpdateAIContextRequest:
      required:
        - name
      type: object
      properties:
        name:
          type: string
        llmSystemMessage:
          type: string
        llmProvider:
          $ref: '#/components/schemas/AIProvider'
        vectorDb:
          $ref: '#/components/schemas/AIKnowledgeVectorDb'          
        documents:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDocument'
        urls:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeUrl'
        dbs:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDatabase'            
    AIContext:
      required:
        - name
      type: object
      properties:
        version:
          format: int32
          type: integer
        creationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        creationUser:
          type: string
        modificationDate:
          $ref: '#/components/schemas/OffsetDateTime'
        modificationUser:
          type: string
        id:
          type: string
        name:
          type: string
        llmSystemMessage:
          type: string
        llmProvider:
          $ref: '#/components/schemas/AIProvider'
        vectorDb:
          $ref: '#/components/schemas/AIKnowledgeVectorDb'          
        documents:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDocument'
        urls:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeUrl'
        dbs:
          type: array
          items:
            $ref: '#/components/schemas/AIKnowledgeDatabase'
    AIContextPageResult:
      type: object
      properties:
        totalElements:
          format: int64
          description: The total elements in the resource.
          type: integer
        number:
          format: int32
          type: integer
        size:
          format: int32
          type: integer
        totalPages:
          format: int64
          type: integer
        stream:
          type: array
          items:
            $ref: '#/components/schemas/AIContext' 
    OffsetDateTime:
      format: date-time
      type: string
      example: 2022-03-10T12:15:50-04:00
    ProblemDetailResponse:
      type: object
      properties:
        errorCode:
          type: string
        detail:
          type: string
        params:
          type: array
          items:
            $ref: '#/components/schemas/ProblemDetailParam'
        invalidParams:
          type: array
          items:
            $ref: '#/components/schemas/ProblemDetailInvalidParam'
    ProblemDetailParam:
      type: object
      properties:
        key:
          type: string
        value:
          type: string
    ProblemDetailInvalidParam:
      type: object
      properties:
        name:
          type: string
        message:
          type: string
